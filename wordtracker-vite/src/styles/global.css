:root{
  --fg:#0f172a; --muted:#64748b; --border:#e2e8f0; --bg:#f8fafc;
  --leaf:#16a34a; --pace:#9ca3af;
  --warn:#f59e0b; --warn-ink:#7c2d12; --ok:#16a34a; --ok-ink:#064e3b;
  --card:#ffffff; --shadow:0 6px 16px rgba(2,6,23,.06);
  --warp-bg:#eef2ff; --warp-border:#c7d2fe; --warp-ink:#3730a3;
  --accent:#10b981; --danger:#ef4444;
  --badge-bg:#ecfdf5; --badge-border:#bbf7d0; --badge-ink:#065f46;
  --btn-bg:#ffffff; --btn-fg:#0f172a; --btn-border:#cbd5e1; --btn-border-hover:#94a3b8;
  --btn-quiet-bg:#f8fafc; --btn-quiet-fg:#334155;
  --btn-danger-bg:#fee2e2; --btn-danger-border:#fecaca; --btn-danger-fg:#7f1d1d;
  --page-bg:linear-gradient(180deg,#f0fdf4,#f8fafc 120vh);
}

body[data-theme="spruce"]{
  --fg:#0f172a; --muted:#64748b; --border:#e2e8f0; --bg:#f8fafc;
  --leaf:#16a34a; --pace:#9ca3af;
  --warn:#f59e0b; --warn-ink:#7c2d12; --ok:#16a34a; --ok-ink:#064e3b;
  --card:#ffffff; --shadow:0 6px 16px rgba(2,6,23,.06);
  --warp-bg:#eef2ff; --warp-border:#c7d2fe; --warp-ink:#3730a3;
  --accent:#10b981; --danger:#ef4444;
  --badge-bg:#ecfdf5; --badge-border:#bbf7d0; --badge-ink:#065f46;
  --btn-bg:#ffffff; --btn-fg:#0f172a; --btn-border:#cbd5e1; --btn-border-hover:#94a3b8;
  --btn-quiet-bg:#f8fafc; --btn-quiet-fg:#334155;
  --btn-danger-bg:#fee2e2; --btn-danger-border:#fecaca; --btn-danger-fg:#7f1d1d;
  --page-bg:linear-gradient(180deg,#f0fdf4,#f8fafc 120vh);
}

body[data-theme="midnight"]{
  --fg:#edf2ff; --muted:#a5b4fc; --border:#3730a3; --bg:#0b1024;
  --leaf:#6366f1; --pace:#4c51bf;
  --warn:#f59e0b; --warn-ink:#fde68a; --ok:#7dd3fc; --ok-ink:#38bdf8;
  --card:#141833; --shadow:0 16px 32px rgba(15,18,54,.55);
  --warp-bg:#1d2260; --warp-border:#3730a3; --warp-ink:#eef2ff;
  --accent:#8b5cf6; --danger:#f87171;
  --badge-bg:#1d2260; --badge-border:#3730a3; --badge-ink:#e0e7ff;
  --btn-bg:#1f2668; --btn-fg:#eef2ff; --btn-border:#4c51bf; --btn-border-hover:#6366f1;
  --btn-quiet-bg:#141833; --btn-quiet-fg:#c7d2fe;
  --btn-danger-bg:#7f1d1d; --btn-danger-border:#b91c1c; --btn-danger-fg:#fee2e2;
  --page-bg:linear-gradient(180deg,#05081a,#141833 120vh);
}

body[data-theme="sunset"]{
  --fg:#341b2c; --muted:#906874; --border:#f2c5b4; --bg:#fff5f2;
  --leaf:#f97316; --pace:#d97706;
  --warn:#f97316; --warn-ink:#7c2d12; --ok:#ea580c; --ok-ink:#7c2d12;
  --card:#ffffff; --shadow:0 6px 16px rgba(122,29,23,.1);
  --warp-bg:#fde4cf; --warp-border:#fbcfe8; --warp-ink:#7c2d12;
  --accent:#ec4899; --danger:#dc2626;
  --badge-bg:#fff1f2; --badge-border:#fecdd3; --badge-ink:#9f1239;
  --btn-bg:#ffffff; --btn-fg:#4a1c2f; --btn-border:#f2c5b4; --btn-border-hover:#f59e8b;
  --btn-quiet-bg:#fff5f2; --btn-quiet-fg:#7c1d3b;
  --btn-danger-bg:#fecdd3; --btn-danger-border:#fda4af; --btn-danger-fg:#7f1d1d;
  --page-bg:linear-gradient(180deg,#fff1f2,#ffe4e6 120vh);
}

body[data-theme="charcoal"]{
  --fg:#f4f4f5; --muted:#d4d4d8; --border:#3f3f46; --bg:#0f0f12;
  --leaf:#fb923c; --pace:#facc15;
  --warn:#f97316; --warn-ink:#fde68a; --ok:#fdba74; --ok-ink:#431407;
  --card:#1a1a1e; --shadow:0 14px 36px rgba(12,12,16,.65);
  --warp-bg:#26262d; --warp-border:#3f3f46; --warp-ink:#e4e4e7;
  --accent:#f97316; --danger:#f87171;
  --badge-bg:#26262d; --badge-border:#3f3f46; --badge-ink:#f4f4f5;
  --btn-bg:#1f1f24; --btn-fg:#f4f4f5; --btn-border:#3f3f46; --btn-border-hover:#52525b;
  --btn-quiet-bg:#17171b; --btn-quiet-fg:#fafaf9;
  --btn-danger-bg:#7f1d1d; --btn-danger-border:#b91c1c; --btn-danger-fg:#fee2e2;
  --page-bg:linear-gradient(180deg,#09090b,#1c1c22 120vh);
}

body[data-theme="dawn"]{
  --fg:#203047; --muted:#526381; --border:#cfe1ff; --bg:#f1f6ff;
  --leaf:#3b82f6; --pace:#60a5fa;
  --warn:#fbbf24; --warn-ink:#78350f; --ok:#38bdf8; --ok-ink:#0f172a;
  --card:#ffffff; --shadow:0 8px 22px rgba(59,130,246,.16);
  --warp-bg:#e4f0ff; --warp-border:#bfd8ff; --warp-ink:#1e3a8a;
  --accent:#f472b6; --danger:#f87171;
  --badge-bg:#e8efff; --badge-border:#c7ddff; --badge-ink:#1e40af;
  --btn-bg:#ffffff; --btn-fg:#1e3a8a; --btn-border:#cfe1ff; --btn-border-hover:#a4c9ff;
  --btn-quiet-bg:#eef6ff; --btn-quiet-fg:#1d4ed8;
  --btn-danger-bg:#fee2e2; --btn-danger-border:#fecaca; --btn-danger-fg:#7f1d1d;
  --page-bg:linear-gradient(180deg,#f9fbff,#e7f0ff 120vh);
}

body[data-theme="sage"]{
  --fg:#10393d; --muted:#3c5c5d; --border:#cde8e4; --bg:#f1fbfa;
  --leaf:#0d9488; --pace:#5eead4;
  --warn:#facc15; --warn-ink:#713f12; --ok:#14b8a6; --ok-ink:#0f766e;
  --card:#ffffff; --shadow:0 8px 20px rgba(8,84,82,.14);
  --warp-bg:#e3f5f3; --warp-border:#c4e8e4; --warp-ink:#0f3f43;
  --accent:#2563eb; --danger:#dc2626;
  --badge-bg:#e6f9f5; --badge-border:#b8ebe2; --badge-ink:#0f4c4f;
  --btn-bg:#ffffff; --btn-fg:#0f3f43; --btn-border:#cde8e4; --btn-border-hover:#9dd8d2;
  --btn-quiet-bg:#f4fcfa; --btn-quiet-fg:#116466;
  --btn-danger-bg:#fee2e2; --btn-danger-border:#fecaca; --btn-danger-fg:#7f1d1d;
  --page-bg:linear-gradient(180deg,#ecfaf6,#f6fefd 120vh);
}

*{box-sizing:border-box}
html,body{height:100%}
body{
  margin:0; font:16px/1.5 system-ui,-apple-system,Segoe UI,Roboto,Arial; color:var(--fg);
  background:var(--page-bg, linear-gradient(180deg,#f0fdf4,#f8fafc 120vh));
  background-color:var(--bg);
}
.wrap{max-width:1000px;margin:0 auto;padding:16px}

/* Header */
.h1{font-family:"Literata",serif;font-weight:800;font-size:28px;letter-spacing:.2px;margin:0}
.badge{display:inline-flex;align-items:center;gap:6px;padding:6px 10px;border-radius:999px;background:var(--badge-bg);color:var(--badge-ink);border:1px solid var(--badge-border);font-size:12px}
.row{display:flex;flex-wrap:wrap;align-items:center;gap:10px;justify-content:space-between}
.headerbar{display:flex;justify-content:space-between;align-items:center;gap:16px;margin-bottom:12px}
.header-left{display:flex;flex-direction:column;gap:6px}
.title-row{display:flex;align-items:center;gap:8px}
.header-meta{display:flex;gap:8px;flex-wrap:wrap}
.header-right{display:flex;align-items:center;gap:10px}
.icon-btn{border:1px solid var(--btn-border);background:var(--btn-bg);color:var(--btn-fg);padding:6px 10px;border-radius:8px;cursor:pointer;font-size:18px;line-height:1;display:flex;align-items:center;justify-content:center;transition:border-color .15s ease, filter .15s ease}
.icon-btn:hover{border-color:var(--btn-border-hover)}
.icon-btn:focus-visible{outline:2px solid var(--accent);outline-offset:2px}
.sync-chip{display:inline-flex;align-items:center;padding:6px 12px;border-radius:999px;background:var(--warp-bg);border:1px solid var(--warp-border);color:var(--warp-ink);font-size:12px}
.btn{border:1px solid var(--btn-border);background:var(--btn-bg);color:var(--btn-fg);padding:10px 12px;border-radius:10px;cursor:pointer;transition:border-color .15s ease, filter .15s ease}
.btn:hover{border-color:var(--btn-border-hover)}
.btn-primary{background:linear-gradient(180deg,#22c55e,#16a34a);color:#fff;border-color:transparent}
.btn-primary:hover{filter:brightness(.98)}
.btn:disabled{opacity:.5;cursor:not-allowed}
.btn-primary:disabled{filter:grayscale(.2) brightness(.95)}
.btn-quiet{background:var(--btn-quiet-bg);border-color:var(--btn-border);color:var(--btn-quiet-fg)}
.btn-danger{background:var(--btn-danger-bg);border:1px solid var(--btn-danger-border);color:var(--btn-danger-fg)}
.btn-danger:hover{filter:brightness(.98)}

/* Motivation */
.motivation{margin:8px 0 16px 0;padding:14px 16px;border-radius:12px;background:var(--warp-bg);border:1px solid var(--warp-border);color:var(--warp-ink);font-size:15px;font-weight:600}

/* Add words */
.add-card{margin-top:14px;display:flex;flex-wrap:wrap;gap:16px;align-items:flex-end;padding:18px}
.add-fields{flex:1 1 220px;min-width:220px;display:flex;flex-direction:column;gap:6px}
.add-fields input{width:100%;padding:12px 14px;border:1px solid var(--border);border-radius:10px;background:var(--card);color:var(--fg);font-size:18px}
.add-actions{display:flex;gap:12px;align-items:center;flex-wrap:wrap}
.add-actions .btn-primary{min-width:160px;padding:12px 18px}

/* Insights */
.insights{display:flex;flex-direction:column;gap:16px;margin-top:18px}
.stats-card,.chart-card{padding:18px}
.stats{display:grid;grid-template-columns:repeat(auto-fit,minmax(180px,1fr));gap:12px}
.stats-secondary{display:grid;grid-template-columns:repeat(auto-fit,minmax(180px,1fr));gap:12px;margin-top:14px}
.stat{background:var(--card);border:1px solid var(--border);border-radius:12px;padding:12px;box-shadow:var(--shadow);display:flex;flex-direction:column;gap:6px}
.k{font-size:13px;color:var(--muted);font-weight:600}
.v{font-size:24px;font-weight:800}
.progress{height:10px;background:#eef2f7;border:1px solid var(--border);border-radius:999px;overflow:hidden;margin-top:8px}
.bar{height:100%;background:linear-gradient(90deg,#86efac,#16a34a);width:0%}
.chart-card .chartwrap{position:relative}
.chart{width:100%;height:340px;background:var(--card);border:1px solid var(--border);border-radius:14px;box-shadow:var(--shadow)}
.legend{display:flex;gap:12px;align-items:center;font-size:12px;color:var(--muted);margin-top:8px}

@media (max-width:720px){
  .headerbar{flex-direction:column;align-items:flex-start;gap:12px}
  .header-right{width:100%;justify-content:flex-end}
  .add-card{flex-direction:column;align-items:stretch}
  .add-actions{justify-content:flex-start}
}

.kdot{width:10px;height:10px;border-radius:999px;display:inline-block}
.kline{width:16px;height:0;border-top:2px dotted var(--pace);display:inline-block}
.tooltip{position:absolute;pointer-events:none;background:#0b1210;color:#fff;font-size:12px;padding:8px 10px;border-radius:10px;transform:translate(-50%,-110%);opacity:0;box-shadow:0 6px 20px rgba(2,6,23,.18); min-width:140px}
.tt-title{font-weight:800;margin-bottom:4px}
.tt-row{display:flex;justify-content:space-between;gap:8px}
.axis-label{font-size:12px;fill:#475569}
.axis-tick{font-size:12px;fill:#475569}
.axis-title{font-size:16px;font-weight:800;fill:#0f172a}
.chart-title{font-size:16px;font-weight:700;fill:#0f172a}

/* Cards & inputs */
.card{background:var(--card);border:1px solid var(--border);border-radius:14px;box-shadow:var(--shadow);padding:14px}
label{display:block;font-size:14px;color:var(--fg);margin-bottom:6px;font-weight:600}
input[type="text"],input[type="number"],input[type="date"],input[type="email"],.select-input{width:100%;padding:10px 12px;border:1px solid var(--border);border-radius:10px;background:var(--card);color:var(--fg)}

/* Actions overlay */
.actions-panel h4{margin:0 0 8px 0;font-size:14px;color:var(--muted);text-transform:uppercase;letter-spacing:.08em}
.actions-groups{display:flex;flex-direction:column;gap:18px;padding:8px 0}
.actions-row{display:flex;flex-wrap:wrap;gap:12px;align-items:center}
.actions-row .sync-chip{margin-left:4px}

/* Overlays (Settings, Entries, Login) */
.overlay{position:fixed; inset:0; display:none; align-items:center; justify-content:flex-end; background:rgba(2,6,23,.35); z-index:1000}
.overlay.show{display:flex}
.panel{width:min(640px,95vw); max-height:100vh; overflow:auto; background:var(--card); border-left:1px solid var(--border); box-shadow:-12px 0 40px rgba(2,6,23,.12); padding:16px}
.sticky{position:sticky; top:0; background:var(--card); padding-bottom:8px; border-bottom:1px solid var(--border); z-index:2}
.footer-sticky{position:sticky; bottom:0; background:var(--card); padding-top:8px; border-top:1px solid var(--border); z-index:2}

/* Entries list */
.entries{display:grid;grid-template-columns:150px 1fr;gap:8px}
.rowlabel{padding:6px 0;font-size:13px;color:var(--muted)}
.jump{display:flex;gap:8px;align-items:center}

/* Toast */
.toast{position:fixed; left:50%; bottom:18px; transform:translateX(-50%); background:#064e3b; color:#fff; padding:10px 14px; border-radius:12px; box-shadow:var(--shadow); font-size:14px; opacity:0; transition:opacity .2s, transform .2s}
.toast.show{opacity:1; transform:translateX(-50%) translateY(-4px)}

/* Auth banner */
.authbar{display:flex;align-items:center;gap:10px;background:var(--warp-bg);border:1px solid var(--warp-border);padding:10px 12px;border-radius:12px;box-shadow:var(--shadow);margin-top:14px;color:var(--warp-ink)}
.authbar strong{color:inherit}

@media (max-width:920px){
  .stats,
  .stats-secondary {
    grid-template-columns:1fr;
  }
}
